// listener's C4 decompiler

void main() {
    l_2 = 1;
    l_3 = 134;
    l_4 = 134;
    l_5 = 1;
    l_6 = 1;
    l_7 = 1;
    l_8 = 134;
    l_9 = 1;
    l_A = 12;
    l_B = 12;
    l_E = 0.001;
    l_11 = "NULL";
    l_16 = 80.0;
    l_17 = 140.0;
    l_18 = 180.0;
    l_1B = 0.0;
    l_1F = -0.0375;
    l_20 = 0.17;
    l_23 = 3;
    l_27 = 1;
    l_28 = 65;
    l_29 = 49;
    l_2A = 64;
    if (SCRIPT::_GET_NUMBER_OF_INSTANCES_OF_STREAMED_SCRIPT(${context_controller}) > 1) {
        SCRIPT::TERMINATE_THIS_THREAD();
    }
    GAMEPLAY::NETWORK_SET_SCRIPT_IS_SAFE_FOR_NETWORK_GAME();
    v_2 = 0;
    v_3 = v_2;
    SYSTEM::SETTIMERA(0);
    g_8B93 = 0;
    sub_d4e();
    g_8B94/*"16"*/ = "CC_SUBSTR";
    v_4 = -1;
    v_5 = -1;
    v_6 = 0;
    v_7 = 0;
    v_8 = 0;
    v_9 = -1;
    v_A = g_10AE5;
    while (1) {
        if (g_10AE5) {
            sub_bb5();
        } else { 
            sub_b11();
        }
        sub_9ce();
        if (g_10AE5 != v_A) {
            sub_9be();
            sub_d4e();
            v_4 = -1;
            v_A = g_10AE5;
            while (STREAMING::_D9D2CFFF49FAB35F()) {
                SYSTEM::WAIT(2000);
            }
        }
        if (g_8B99) {
            if (g_8B9B > -1) {
                if (!g_8B1F[g_8B9B/*19*/]._f6) {
                    if (!sub_8ea(g_8B9B, 1)) {
                        g_8B9B = -1;
                    }
                }
            }
        }
        if (sub_7b5()) {
            v_4 = -1;
            sub_9be();
        }
        if (v_4 > -1) {
            if (!g_8B99) {
                if (g_8B9B != v_4) {
                    if (sub_747(g_8B9B)) {
                        sub_9be();
                        if ((!g_8B1F[v_4/*19*/]._f5) && g_8B1F[v_4/*19*/]) {
                            if (!sub_7b5()) {
                                if (!g_8B1F[v_4/*19*/]._f7) {
                                    if (!g_8B1F[v_4/*19*/]._f6) {
                                        if (!g_8B1F[v_4/*19*/]._fC) {
                                            sub_72d(g_8B1F[v_4/*19*/]._f8, g_8B1F[v_4/*19*/]._f3);
                                        } else { 
                                            sub_70b(g_8B1F[v_4/*19*/]._f8, g_8B1F[v_4/*19*/]._fD, g_8B1F[v_4/*19*/]._f3);
                                        }
                                        g_8B9B = v_4;
                                    }
                                }
                            }
                        }
                    }
                }
            } else { 
                sub_9be();
            }
        } else { 
            sub_9be();
        }
        switch (v_2) {
        case 0:
            v_4 = sub_6bf();
            if (CONTROLS::IS_CONTROL_RELEASED(2, 51)) {
                v_8 = 1;
            }
            if (!sub_7b5()) {
                if ((v_4 > -1) && v_8) {
                    if (CONTROLS::IS_CONTROL_JUST_PRESSED(2, 51)) {
                        g_8B1F[v_4/*19*/]._f4 = 1;
                        g_8B1F[v_4/*19*/]._f11 = 0;
                        v_9 = g_8B1F[v_4/*19*/]._f1;
                        v_2 = 1;
                        g_8B92 = 0;
                    }
                }
            } else { 
                v_4 = -1;
            }
            if (v_5 != v_4) {
                if (v_4 != -1) {
                    if (!PED::_IS_PED_DEAD(PLAYER::GET_PLAYER_PED(PLAYER::GET_PLAYER_INDEX()), 1)) {
                        if (PED::IS_PED_IN_ANY_VEHICLE(PLAYER::GET_PLAYER_PED(PLAYER::GET_PLAYER_INDEX()), 0)) {
                            if (CONTROLS::IS_CONTROL_ENABLED(0, 101)) {
                                v_7 = 1;
                                CONTROLS::DISABLE_CONTROL_ACTION(0, 101, 1);
                            }
                            if (CONTROLS::IS_CONTROL_ENABLED(0, 74)) {
                                v_6 = 1;
                                CONTROLS::DISABLE_CONTROL_ACTION(0, 74, 1);
                            }
                        }
                    }
                } else { 
                    if (v_7) {
                        CONTROLS::ENABLE_CONTROL_ACTION(0, 101, 1);
                        v_7 = 0;
                    }
                    if (v_6) {
                        CONTROLS::ENABLE_CONTROL_ACTION(0, 74, 1);
                        v_6 = 0;
                    }
                }
                v_5 = v_4;
            }
            break;
        case 1:
            if ((v_4 < 0) || (sub_675() == 0)) {
                v_2 = 0;
            } else { 
                if (SYSTEM::TIMERA() > 5000) {
                    g_8B1F[v_4/*19*/]._f7 = 1;
                    v_2 = 0;
                } else if (sub_652(v_4)) {
                    v_2 = 2;
                }
                if (!(v_9 == g_8B1F[v_4/*19*/]._f1)) {
                    v_2 = 0;
                }
                if (g_8B1F[v_4/*19*/]._f7 || (g_8B1F[v_4/*19*/] == 0)) {
                    v_2 = 0;
                }
            }
            break;
        case 2:
            if (g_8B92) {
                sub_9be();
            }
            if (CONTROLS::IS_CONTROL_JUST_PRESSED(2, 51)) {
                if (v_4 > -1) {
                    g_8B1F[v_4/*19*/]._f11 = 0;
                }
            }
            if (g_8B93) {
                g_8B93 = 0;
                v_2 = 0;
            } else if (v_4 > -1) {
                if (!(g_8B1F[v_4/*19*/]._f4 || g_8B1F[v_4/*19*/]._f7)) {
                    g_8B93 = 0;
                    v_4 = -1;
                }
            }
            if (v_4 > -1) {
                if (g_8B1F[v_4/*19*/]._f7 || (g_8B1F[v_4/*19*/] == 0)) {
                    v_4 = -1;
                }
            }
            if (v_4 == -1) {
                v_2 = 0;
                v_8 = 0;
            }
            break;
        }
        if (v_4 > -1) {
            CONTROLS::DISABLE_CONTROL_ACTION(0, 46, 1);
            CONTROLS::DISABLE_CONTROL_ACTION(0, 54, 1);
        }
        if (v_2 != v_3) {
            v_3 = v_2;
            SYSTEM::SETTIMERA(0);
            v_8 = 0;
        }
        sub_5c5();
        sub_4ee(&v_4);
        g_8B98 = 0;
        g_8B99 = 0;
        sub_434();
        SYSTEM::WAIT(0);
    }
}

void sub_434() {
    if (!l_55) {
        return ;
    }
    v_2 = 1;
    if (l_5F == 1) {
        v_2 = 0;
    }
    if (l_56) {
        UI::_8509B634FBE7DA11(&l_57);
        UI::_ADD_TEXT_COMPONENT_ITEM_STRING(&g_8B94);
        UI::_ADD_TEXT_COMPONENT_ITEM_STRING(&l_5B);
        UI::_238FFE5C7B0498A6(0, 0, v_2, 50);
    } else { 
        UI::_8509B634FBE7DA11(&l_57);
        UI::_ADD_TEXT_COMPONENT_ITEM_STRING(&g_8B94);
        UI::_238FFE5C7B0498A6(0, 0, v_2, 50);
    }
    switch (l_5F) {
    case 0:
        break;
    case 1:
        sub_4ab(0);
        break;
    }
}

void sub_4ab(auto a_0) {
    $B9C362BABECDDC7A(3, 21, 200, 0, 0);
    if (a_0 && (!sub_4d8())) {
        AUDIO::PLAY_SOUND_FRONTEND(-1, "Event_Message_Purple", "GTAO_FM_Events_Soundset", 0);
    }
}

auto sub_4d8() {
    return g_24F6DB._f858[0/*70*/]._f1 != 0;
}

void sub_4ee(auto a_0) {
    v_3 = 0;
    for (v_3 = 0; v_3 < 6; v_3 += 1) {
        if (g_8B1F[v_3/*19*/] && g_8B1F[v_3/*19*/]._f4) {
            if (g_8B1F[v_3/*19*/]._f12 != 0) {
                if (!SCRIPT::IS_THREAD_ACTIVE(g_8B1F[v_3/*19*/]._f12)) {
                    if (a_0 > -1) {
                        sub_5a6();
                    }
                    g_8B1F[v_3/*19*/] = 0;
                    g_8B1F[v_3/*19*/]._f12 = 0;
                    g_8B1F[v_3/*19*/] = 0;
                    g_8B1F[v_3/*19*/]._f4 = 0;
                    g_8B1F[v_3/*19*/]._f5 = 0;
                    g_8B1F[v_3/*19*/]._f2 = 0;
                    g_8B1F[v_3/*19*/]._f7 = 0;
                    g_8B1F[v_3/*19*/]._f6 = 0;
                    g_8B1F[v_3/*19*/]._f3 = 0;
                    a_0 = -1;
                }
            }
        }
    }
}

void sub_5a6() {
    if ((g_8B9B != -1) || l_55) {
        l_55 = 0;
        g_8B9B = -1;
    }
}

void sub_5c5() {
    v_2 = 0;
    for (v_2 = 0; v_2 < 6; v_2 += 1) {
        if (g_8B1F[v_2/*19*/]._f7) {
            if (v_2 == g_8B9B) {
                sub_9be();
            }
            g_8B1F[v_2/*19*/]._f12 = 0;
            g_8B1F[v_2/*19*/] = 0;
            g_8B1F[v_2/*19*/]._f4 = 0;
            g_8B1F[v_2/*19*/]._f5 = 0;
            g_8B1F[v_2/*19*/]._f2 = 0;
            g_8B1F[v_2/*19*/]._f7 = 0;
            g_8B1F[v_2/*19*/]._f6 = 0;
            g_8B1F[v_2/*19*/]._f1 = -1;
            g_8B1F[v_2/*19*/]._f3 = 0;
        }
    }
}

auto sub_652(auto a_0) {
    if (a_0 < 0) {
        return 0;
    }
    if (g_8B1F[a_0/*19*/]._f5) {
        return 1;
    }
    return 0;
}

auto sub_675() {
    v_2 = 0;
    v_3 = 0;
    for (v_2 = 0; v_2 < 6; v_2 += 1) {
        if (g_8B1F[v_2/*19*/] == 1) {
            if (g_8B1F[v_2/*19*/]._f4 == 0) {
                v_3 += 1;
            }
        }
    }
    if (v_3 == 0) {
        sub_9be();
    }
    return v_3;
}

auto sub_6bf() {
    v_2 = 0;
    v_3 = -1;
    v_4 = -1;
    for (v_2 = 0; v_2 < 6; v_2 += 1) {
        if (g_8B1F[v_2/*19*/]) {
            if (g_8B1F[v_2/*19*/]._f2 > v_3) {
                v_4 = v_2;
                v_3 = g_8B1F[v_2/*19*/]._f2;
            }
        }
    }
    return v_4;
}

void sub_70b(auto a_0, auto a_1, auto a_2, auto a_3, auto a_4, auto a_5, auto a_6, auto a_7, auto a_8) {
    l_57/*{4}*/ = a_0;
    l_5B/*{4}*/ = a_4;
    l_55 = 1;
    l_56 = 1;
    l_5F = a_8;
}

void sub_72d(auto a_0, auto a_1, auto a_2, auto a_3, auto a_4) {
    l_57/*{4}*/ = a_0;
    l_55 = 1;
    l_56 = 0;
    l_5F = a_4;
}

auto sub_747(auto a_0) {
    if (g_15550 && g_1554F) {
        return 0;
    }
    if (a_0 > 0) {
        if (sub_8ea(a_0, 1) || l_55) {
            return 1;
        }
    }
    if (UI::IS_HELP_MESSAGE_BEING_DISPLAYED() && (!UI::_214CD562A939246A())) {
        for (v_3 = 0; v_3 < 6; v_3 += 1) {
            if (sub_8ea(v_3, 1)) {
                return 1;
            }
        }
        return 0;
    }
    return 1;
}

auto sub_7b5() {
    if (g_105FA) {
        return 1;
    }
    if (!PLAYER::IS_PLAYER_PLAYING(PLAYER::GET_PLAYER_INDEX())) {
        return 1;
    }
    if (sub_890(0)) {
        return 1;
    }
    if (CUTSCENE::IS_CUTSCENE_PLAYING()) {
        return 1;
    }
    if (g_8B98) {
        return 1;
    }
    if (UI::IS_HUD_COMPONENT_ACTIVE(19)) {
        return 1;
    }
    if (sub_867(1)) {
        return 1;
    }
    if (STREAMING::_D9D2CFFF49FAB35F()) {
        return 1;
    }
    if (sub_82c(8, -1)) {
        return 1;
    }
    return 0;
}

auto sub_82c(auto a_0, auto a_1) {
    switch (a_0) {
    case 5:
        if (a_1 > -1) {
            return g_1441E3._fCB[a_1/*1*/];
        } else { }
        break;
    }
    return GAMEPLAY::IS_BIT_SET(g_1441E3._f3B5, a_0);
}

auto sub_867(auto a_0) {
    if (a_0) {
        return g_42CB._f4 && (g_42CB._f68 == 4);
    } else { 
        return g_42CB._f4;
    }
}

auto sub_890(auto a_0) {
    if (a_0 == 1) {
        if (g_383A._f1 > 3) {
            if (GAMEPLAY::IS_BIT_SET(g_8D8, 14)) {
                return 1;
            } else { 
                return 0;
            }
        } else { 
            return 0;
        }
    } else { 
        if (SCRIPT::_GET_NUMBER_OF_INSTANCES_OF_STREAMED_SCRIPT(${cellphone_flashhand}) > 0) {
            return 1;
        }
        if (g_383A._f1 > 3) {
            return 1;
        } else { 
            return 0;
        }
    }
}

auto sub_8ea(auto a_0, auto a_1) {
    v_4 = sub_983(a_0);
    if (a_1 == 0) {
        if (v_4 == -1) {
            return 0;
        }
    } else { 
        v_4 = a_0;
    }
    if (v_4 < 0) {
        return 0;
    }
    if (g_8B1F[v_4/*19*/]._f6) {
        return 0;
    }
    v_5 = 0;
    if (!g_8B1F[v_4/*19*/]._fC) {
        UI::_0A24DA3A41B718F5(&g_8B1F[v_4/*19*/]._f8);
        UI::_ADD_TEXT_COMPONENT_ITEM_STRING(&g_8B94);
        v_5 = UI::_10BDDBFC529428DD(0);
    } else { 
        UI::_0A24DA3A41B718F5(&g_8B1F[v_4/*19*/]._f8);
        UI::_ADD_TEXT_COMPONENT_ITEM_STRING(&g_8B94);
        UI::_ADD_TEXT_COMPONENT_ITEM_STRING(&g_8B1F[v_4/*19*/]._fD);
        v_5 = UI::_10BDDBFC529428DD(0);
    }
    return v_5;
}

auto sub_983(auto a_0) {
    if (a_0 < 0) {
        return -1;
    }
    v_3 = 0;
    for (v_3 = 0; v_3 < 6; v_3 += 1) {
        if (g_8B1F[v_3/*19*/]._f1 == a_0) {
            return v_3;
        }
    }
    return -1;
}

void sub_9be() {
    sub_5a6();
    g_8B9B = -1;
}

void sub_9ce() {
    if ((!STREAMING::_D9D2CFFF49FAB35F()) && (!g_105FA)) {
        if (sub_ad5(0)) {
            if (!GAMEPLAY::IS_STRING_NULL_OR_EMPTY(&g_250EA1._f290._fC)) {
                sub_ac3();
                sub_a0a(6);
            }
        }
    }
}

void sub_a0a(auto a_0) {
    g_10603 = a_0;
    switch (g_10603) {
    case 3:
        g_10601 = 0;
        break;
    case 4:
        g_10601 = 3;
        break;
    }
    if (SCRIPT::_GET_NUMBER_OF_INSTANCES_OF_STREAMED_SCRIPT(${appinternet}) > 0) {
        return ;
    }
    if (g_10AE5 && sub_ab7()) {
        return ;
    }
    if ((!g_10AE5) && sub_aab()) {
        return ;
    }
    if (!SCRIPT::HAS_SCRIPT_LOADED("appInternet")) {
        SCRIPT::REQUEST_SCRIPT("appInternet");
    }
    while (!SCRIPT::HAS_SCRIPT_LOADED("appInternet")) {
        SYSTEM::WAIT(0);
    }
    SYSTEM::START_NEW_SCRIPT("appInternet", 3584);
    SCRIPT::SET_SCRIPT_AS_NO_LONGER_NEEDED("appInternet");
}

auto sub_aab() {
    return g_105FB;
}

auto sub_ab7() {
    return g_19CB6B;
}

void sub_ac3() {
    g_250EA1._f290._f1C = 0;
}

auto sub_ad5(auto a_0) {
    if (a_0) {
        return g_250EA1._f290._f1C && (GAMEPLAY::GET_HASH_KEY(SCRIPT::GET_THIS_SCRIPT_NAME()) == g_250EA1._f290._f1F);
    } else { 
        return g_250EA1._f290._f1C;
    }
}

void sub_b11() {
    v_2 = 0;
    v_3 = 0;
    for (v_3 = 0; v_3 < 3; v_3 += 1) {
        if (g_CADD[v_3/*1*/] < 0) {
            g_CADD[v_3/*1*/] = 0;
            v_2 = 1;
        }
    }
    if (v_2) {
        sub_b5b(0);
        sub_b5b(1);
        sub_b5b(2);
    }
}

void sub_b5b(auto a_0) {
    v_3 = g_CADD[a_0/*1*/];
    switch (a_0) {
    case 0:
        STATS::STAT_SET_INT(0x324c31d, v_3, 1);
        break;
    case 1:
        STATS::STAT_SET_INT(0x44bd6982, v_3, 1);
        break;
    case 2:
        STATS::STAT_SET_INT(0x8d75047d, v_3, 1);
        break;
    }
}

void sub_bb5() {
    if (g_180019 != -1) {
        v_2 = g_18001A[0/*1*/];
        v_2._f1 = g_18001A[1/*1*/];
        v_2._f2 = g_18001A[2/*1*/];
        v_2._f3 = g_18001A[3/*1*/];
        v_2._f4 = g_18001A[4/*1*/];
        v_2._f5 = g_18001A[5/*1*/];
        v_2._f6 = g_18001A[6/*1*/];
        v_2._f7 = g_18001A[7/*1*/];
        v_2._f8 = g_18001A[8/*1*/];
        v_2._f9 = g_18001A[9/*1*/];
        v_2._fA = g_18001A[10/*1*/];
        v_2._fB = g_18001A[11/*1*/];
        v_2._fC = g_18001A[12/*1*/];
        if (GAMEPLAY::IS_XBOX360_VERSION() || GAMEPLAY::IS_DURANGO_VERSION()) {
            if (!l_60) {
                if (NETWORK::NETWORK_GAMERTAG_FROM_HANDLE_START(&v_2)) {
                    l_60 = 1;
                }
            }
            if (l_60) {
                if (NETWORK::NETWORK_GAMERTAG_FROM_HANDLE_PENDING()) {
                } else { 
                    if (NETWORK::NETWORK_GAMERTAG_FROM_HANDLE_SUCCEEDED()) {
                        g_200000[sub_d41()/*8064*/]._f1ECF._f12[g_180019/*6*/]/*"24"*/ = NETWORK::NETWORK_GET_GAMERTAG_FROM_HANDLE(&v_2);
                    }
                    g_180019 = -1;
                    l_60 = 0;
                }
            }
        } else if (GAMEPLAY::IS_PS3_VERSION() || GAMEPLAY::IS_ORBIS_VERSION()) {
            if (sub_d31(v_2)) {
                g_200000[sub_d41()/*8064*/]._f1ECF._f12[g_180019/*6*/]/*"24"*/ = NETWORK::NETWORK_GET_GAMERTAG_FROM_HANDLE(&v_2);
            }
            g_180019 = -1;
            l_60 = 0;
        } else { 
            if (sub_d31(v_2)) {
                g_200000[sub_d41()/*8064*/]._f1ECF._f12[g_180019/*6*/]/*"24"*/ = NETWORK::NETWORK_MEMBER_ID_FROM_GAMER_HANDLE(&v_2);
            }
            g_180019 = -1;
            l_60 = 0;
        }
    }
}

auto sub_d31(auto a_0, auto a_1, auto a_2, auto a_3, auto a_4, auto a_5, auto a_6, auto a_7, auto a_8, auto a_9, auto a_10, auto a_11, auto a_12) {
    return NETWORK::NETWORK_IS_HANDLE_VALID(&a_0, 13);
}

auto sub_d41() {
    v_2 = 0;
    return v_2;
}

void sub_d4e() {
    g_8B92 = 0;
    g_8B98 = 0;
    g_8B99 = 0;
    g_8B9A = 1;
    g_8B9B = -1;
    v_2 = 0;
    for (v_2 = 0; v_2 < 6; v_2 += 1) {
        g_8B1F[v_2/*19*/] = 0;
    }
}