// listener's C4 decompiler

void main() {
    l_2 = 1;
    l_3 = 134;
    l_4 = 134;
    l_5 = 1;
    l_6 = 1;
    l_7 = 1;
    l_8 = 134;
    l_9 = 1;
    l_A = 12;
    l_B = 12;
    l_E = 0.001;
    l_11 = "NULL";
    l_14 = 0.0;
    l_18 = -0.0375;
    l_19 = 0.17;
    l_1D = 80.0;
    l_1E = 140.0;
    l_1F = 180.0;
    l_22 = 3;
    l_4E/*{9}*/ = l_91;
    if (PLAYER::_C968670BFACE42D9(19)) {
        sub_97f();
    }
    if (!PED::IS_PED_INJURED(PLAYER::PLAYER_PED_ID())) {
        sub_8b7();
    }
    v_5 = 0;
    v_6 = 0;
    v_7 = 200;
    v_8 = GAMEPLAY::GET_GAME_TIMER();
    while (1) {
        if (!sub_4de()) {
            sub_97f();
        }
        if ((GAMEPLAY::GET_GAME_TIMER() - v_8) > 100) {
            if (!PED::IS_PED_INJURED(PLAYER::PLAYER_PED_ID())) {
                v_2/*{3}*/ = ENTITY::GET_ENTITY_COORDS(PLAYER::PLAYER_PED_ID(), 0);
                if (sub_4be(l_4E[v_5/*1*/])) {
                    if ((SYSTEM::VDIST2(v_2, ENTITY::GET_ENTITY_COORDS(l_4E[v_5/*1*/], 0)) >= ((float)(v_7 * v_7))) && ENTITY::IS_ENTITY_OCCLUDED(l_4E[v_5/*1*/])) {
                        sub_450(&l_67[v_5/*8*/]);
                        sub_401(&l_4E[v_5/*1*/], 1, 0, 1);
                    } else { 
                        sub_2e4(l_4E[v_5/*1*/], &l_67[v_5/*8*/], -1, 0, 0, 0, 0xbf800000, 0);
                    }
                } else if (ENTITY::DOES_ENTITY_EXIST(l_4E[v_5/*1*/])) {
                    sub_401(&l_4E[v_5/*1*/], 1, 0, 1);
                }
                if (sub_29a(l_4E._f5[v_6/*1*/])) {
                    if (SYSTEM::VDIST2(v_2, l_57[v_6/*3*/]) >= ((float)(v_7 * v_7))) {
                        if (ENTITY::IS_ENTITY_OCCLUDED(l_4E._f5[v_6/*1*/]) || PED::IS_PED_IN_VEHICLE(PLAYER::PLAYER_PED_ID(), l_4E._f5[v_6/*1*/], 0)) {
                            sub_263(&l_4E._f5[v_6/*1*/]);
                        }
                    }
                } else if (ENTITY::DOES_ENTITY_EXIST(l_4E._f5[v_6/*1*/])) {
                    sub_263(&l_4E._f5[v_6/*1*/]);
                }
                v_5 += 1;
                if (v_5 == l_4E) {
                    v_5 = 0;
                }
                v_6 += 1;
                if (v_6 == l_4E._f5) {
                    v_6 = 0;
                }
                if (sub_20a()) {
                    sub_97f();
                }
            }
            v_8 = GAMEPLAY::GET_GAME_TIMER();
        }
        SYSTEM::WAIT(0);
    }
}

auto sub_20a() {
    for (v_2 = 0; v_2 <= (l_4E._f5 - 1); v_2 += 1) {
        if (ENTITY::DOES_ENTITY_EXIST(l_4E._f5[v_2/*1*/])) {
            return 0;
        }
    }
    for (v_2 = 0; v_2 <= (l_4E - 1); v_2 += 1) {
        if (ENTITY::DOES_ENTITY_EXIST(l_4E[v_2/*1*/])) {
            return 0;
        }
    }
    return 1;
}

void sub_263(auto a_0) {
    if (ENTITY::DOES_ENTITY_EXIST(a_0)) {
        ENTITY::IS_ENTITY_DEAD(a_0);
        if (ENTITY::IS_ENTITY_A_MISSION_ENTITY(a_0) && ENTITY::_DDE6DF5AE89981D2(a_0, 1)) {
            ENTITY::SET_VEHICLE_AS_NO_LONGER_NEEDED(a_0);
        }
    }
}

auto sub_29a(auto a_0) {
    if (sub_2c4(a_0)) {
        if (VEHICLE::IS_VEHICLE_DRIVEABLE(a_0, 0)) {
            if (!FIRE::IS_ENTITY_ON_FIRE(a_0)) {
                return 1;
            }
        }
    }
    return 0;
}

auto sub_2c4(auto a_0) {
    if (ENTITY::DOES_ENTITY_EXIST(a_0)) {
        if (!ENTITY::IS_ENTITY_DEAD(a_0)) {
            return 1;
        }
    }
    return 0;
}

auto sub_2e4(auto a_0, auto a_1, auto a_2, auto a_3, auto a_4, auto a_5, auto a_6, auto a_7) {
    if (a_3 == 0) {
        a_3 = PLAYER::GET_PLAYER_INDEX();
    }
    if (a_6 < 0.0) {
        a_6 = 100.0;
    }
    if (!PED::IS_PED_INJURED(a_0)) {
        if (!UI::DOES_PED_HAVE_AI_BLIP(a_0)) {
            UI::_D30C50DF888D58B5(a_0, 1);
            a_1._f7 = a_0;
            UI::_E52B8E7F85D39A08(a_0, a_2);
            UI::_97C65887D4B37FA9(a_0, a_6);
            if (UI::DOES_BLIP_EXIST(a_1)) {
                UI::SET_BLIP_PRIORITY(a_1, 7);
            }
        }
        UI::_0C4BBF625CA98C4E(a_0, a_4);
        UI::HIDE_SPECIAL_ABILITY_LOCKON_OPERATION(a_0, a_5);
        a_1 = UI::_7CD934010E115C2C(a_0);
        if (!GAMEPLAY::IS_BIT_SET(a_1._f6, 2)) {
            if (UI::DOES_BLIP_EXIST(a_1)) {
                if (!GAMEPLAY::IS_STRING_NULL_OR_EMPTY(a_7)) {
                    UI::_F9113A30DE5C6670("MCUSTBLIP");
                    UI::_ADD_TEXT_COMPONENT_STRING(a_7);
                    UI::_BC38B49BCB83BC9B(a_1);
                }
                GAMEPLAY::SET_BIT(&a_1._f6, 2);
            }
        }
        if (PED::IS_PED_IN_ANY_VEHICLE(a_0, 0)) {
            a_1._f1 = UI::_56176892826A4FE8(a_0);
            if (!GAMEPLAY::IS_BIT_SET(a_1._f6, 3)) {
                if (UI::DOES_BLIP_EXIST(a_1._f1)) {
                    UI::SET_BLIP_PRIORITY(a_1._f1, 7);
                    GAMEPLAY::SET_BIT(&a_1._f6, 3);
                }
            }
        } else if (UI::DOES_BLIP_EXIST(a_1._f1)) {
            a_1._f1 = 0;
            GAMEPLAY::CLEAR_BIT(&a_1._f6, 3);
        }
    } else { 
        return 1;
    }
    return 0;
}

void sub_401(auto a_0, auto a_1, auto a_2, auto a_3) {
    if (ENTITY::DOES_ENTITY_EXIST(a_0)) {
        if (!PED::IS_PED_INJURED(a_0)) {
            ENTITY::SET_ENTITY_LOAD_COLLISION_FLAG(a_0, 0);
            if (a_3 == 0) {
                AI::CLEAR_PED_SECONDARY_TASK(a_0);
            }
            PED::SET_PED_KEEP_TASK(a_0, a_1);
            if (a_2 == 1) {
                PED::SET_BLOCKING_OF_NON_TEMPORARY_EVENTS(a_0, 0);
            }
        }
        ENTITY::SET_PED_AS_NO_LONGER_NEEDED(a_0);
    }
}

void sub_450(auto a_0) {
    if (UI::DOES_BLIP_EXIST(a_0)) {
        UI::REMOVE_BLIP(a_0);
        v_3 = 1;
    }
    if (UI::DOES_BLIP_EXIST(a_0._f1)) {
        UI::REMOVE_BLIP(&a_0._f1);
        v_3 = 1;
    }
    if (ENTITY::DOES_ENTITY_EXIST(a_0._f7)) {
        if (!PED::IS_PED_INJURED(a_0._f7)) {
            if (UI::DOES_PED_HAVE_AI_BLIP(a_0._f7)) {
                UI::_D30C50DF888D58B5(a_0._f7, 0);
            }
        }
        v_3 = 1;
    }
    if (v_3) {
        a_0/*{8}*/ = v_4;
    }
}

auto sub_4be(auto a_0) {
    if (sub_2c4(a_0)) {
        if (!PED::IS_PED_INJURED(a_0)) {
            return 1;
        }
    }
    return 0;
}

auto sub_4de() {
    if (SCRIPT::_GET_NUMBER_OF_INSTANCES_OF_STREAMED_SCRIPT(${bailbond2}) == 0) {
        if (!sub_6c5(4)) {
            return 0;
        }
    }
    if (g_15547 == 1) {
        return 0;
    }
    if (CUTSCENE::IS_CUTSCENE_PLAYING()) {
        return 0;
    }
    if (g_5F80) {
        return 0;
    }
    if (sub_52e() != 2) {
        return 0;
    }
    return 1;
}

auto sub_52e() {
    sub_547();
    return g_17C9F._f6C1._f21B._fC8D;
}

void sub_547() {
    if (ENTITY::DOES_ENTITY_EXIST(PLAYER::PLAYER_PED_ID())) {
        if (sub_69b(g_17C9F._f6C1._f21B._fC8D) != ENTITY::GET_ENTITY_MODEL(PLAYER::PLAYER_PED_ID())) {
            v_2 = sub_65e(PLAYER::PLAYER_PED_ID());
            if (sub_652(v_2) && ((!sub_644(14)) || g_17887)) {
                if ((g_17C9F._f6C1._f21B._fC8D != v_2) && sub_652(g_17C9F._f6C1._f21B._fC8D)) {
                    g_17C9F._f6C1._f21B._fC8E = g_17C9F._f6C1._f21B._fC8D;
                }
                g_17C9F._f6C1._f21B._fC8F = v_2;
                g_17C9F._f6C1._f21B._fC8D = v_2;
                return ;
            }
        } else { 
            if (g_17C9F._f6C1._f21B._fC8D != 145) {
                g_17C9F._f6C1._f21B._fC8F = g_17C9F._f6C1._f21B._fC8D;
            }
            return ;
        }
    }
    g_17C9F._f6C1._f21B._fC8D = 145;
}

auto sub_644(auto a_0) {
    return g_8863 == a_0;
}

auto sub_652(auto a_0) {
    return a_0 < 3;
}

auto sub_65e(auto a_0) {
    if (ENTITY::DOES_ENTITY_EXIST(a_0)) {
        v_4 = ENTITY::GET_ENTITY_MODEL(a_0);
        for (v_3 = 0; v_3 <= 2; v_3 += 1) {
            if (sub_69b(v_3) == v_4) {
                return v_3;
            }
        }
    }
    return 145;
}

auto sub_69b(auto a_0) {
    if (sub_652(a_0)) {
        return g_17C9F._f7463[a_0/*29*/];
    } else if (a_0 != 145) {}
    return 0;
}

auto sub_6c5(auto a_0) {
    return sub_6d6(a_0, g_8863);
}

auto sub_6d6(auto a_0, auto a_1) {
    if (a_1 == 15) {
        return 1;
    }
    if (a_0 == 15) {
        return 0;
    }
    switch (a_0) {
    case 16:
        switch (a_1) {
        case 7:
        case 9:
        case 10:
        case 13:
        case 14:
            return 0;
            break;
        }
        return 1;
        break;
    case 0:
        switch (a_1) {
        case 5:
        case 17:
            return 1;
            break;
        }
        break;
    case 2:
    case 3:
        switch (a_1) {
        case 5:
        case 6:
        case 8:
        case 17:
            return 1;
            break;
        }
        break;
    case 4:
        if (a_1 == 17) {
            return 1;
        }
        break;
    case 5:
        break;
    case 6:
    case 8:
        if (a_1 == 5) {
            return 1;
        }
        break;
    case 7:
        if (a_1 == 6) {
            return 1;
        }
        break;
    case 9:
        if (a_1 == 5) {
            return 1;
        }
        break;
    case 10:
        switch (a_1) {
        case 5:
        case 6:
        case 17:
            return 1;
            break;
        }
        break;
    case 11:
        if (a_1 == 5) {
            return 1;
        }
        break;
    case 17:
        switch (a_1) {
        case 5:
        case 12:
        case 17:
            return 1;
            break;
        }
        break;
    case 12:
    case 18:
        switch (a_1) {
        case 5:
        case 6:
        case 8:
            return 1;
            break;
        }
        break;
    case 13:
        switch (a_1) {
        case 5:
            return 1;
            break;
        }
        break;
    case 14:
        switch (a_1) {
        case 5:
            return 1;
            break;
        }
        break;
    }
    return 0;
}

void sub_8b7() {
    PED::ADD_RELATIONSHIP_GROUP("ENEMIES", &l_90);
    PED::SET_RELATIONSHIP_BETWEEN_GROUPS(5, ${player}, l_90);
    PED::SET_RELATIONSHIP_BETWEEN_GROUPS(5, l_90, ${player});
    for (v_2 = 0; v_2 <= (l_4E._f5 - 1); v_2 += 1) {
        if (sub_29a(l_4E._f5[v_2/*1*/])) {
            ENTITY::SET_ENTITY_AS_MISSION_ENTITY(l_4E._f5[v_2/*1*/], 1, 1);
            l_57[v_2/*3*/]/*{3}*/ = ENTITY::GET_ENTITY_COORDS(l_4E._f5[v_2/*1*/], 0);
        }
    }
    for (v_2 = 0; v_2 <= (l_4E - 1); v_2 += 1) {
        if (sub_4be(l_4E[v_2/*1*/])) {
            ENTITY::SET_ENTITY_AS_MISSION_ENTITY(l_4E[v_2/*1*/], 1, 1);
            PED::SET_PED_RELATIONSHIP_GROUP_HASH(l_4E[v_2/*1*/], l_90);
            sub_2e4(l_4E[v_2/*1*/], &l_67[v_2/*8*/], -1, 0, 0, 0, 0xbf800000, 0);
        }
    }
}

void sub_97f() {
    PED::CLEAR_RELATIONSHIP_BETWEEN_GROUPS(5, ${player}, l_90);
    PED::CLEAR_RELATIONSHIP_BETWEEN_GROUPS(5, l_90, ${player});
    for (v_2 = 0; v_2 <= (l_4E - 1); v_2 += 1) {
        sub_450(&l_67[v_2/*8*/]);
        sub_401(&l_4E[v_2/*1*/], 1, 0, 1);
    }
    for (v_2 = 0; v_2 <= (l_4E._f5 - 1); v_2 += 1) {
        sub_263(&l_4E._f5[v_2/*1*/]);
    }
    SCRIPT::TERMINATE_THIS_THREAD();
}