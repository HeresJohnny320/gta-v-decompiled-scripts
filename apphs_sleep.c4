// listener's C4 decompiler

void main() {
    l_2 = 1;
    l_3 = 134;
    l_4 = 134;
    l_5 = 1;
    l_6 = 1;
    l_7 = 1;
    l_8 = 134;
    l_9 = 1;
    l_A = 12;
    l_B = 12;
    l_E = 0.001;
    l_27 = 0.82;
    l_28 = 0.42;
    l_29 = 0.0;
    l_2A = 0.0;
    GAMEPLAY::NETWORK_SET_SCRIPT_IS_SAFE_FOR_NETWORK_GAME();
    sub_d1b();
    l_26 = 1;
    sub_cf4();
    sub_b59();
    while (1) {
        SYSTEM::WAIT(0);
        if (g_3839._f1 != 9) {
            switch (g_3839._f1) {
            case 7:
                sub_9f0();
                if (l_26) {
                    sub_720();
                } else { 
                    sub_53d();
                }
                break;
            case 8:
                sub_9f0();
                sub_53d();
                if (sub_4cb(2, g_3819, 0)) {
                    sub_4ab();
                    g_3823 = 1;
                    sub_448(g_3826, "DISPLAY_VIEW", 1.0, 0xbf800000, 0xbf800000, 0xbf800000, 0xbf800000);
                    sub_b59();
                    if (g_3839._f1 > 3) {
                        g_3839._f1 = 7;
                    }
                }
                break;
            default:
                break;
            }
            if (sub_41f()) {
                sub_153();
            }
        } else { 
            g_383B = 6;
            sub_153();
        }
        if (sub_110()) {
            sub_153();
        }
    }
}

auto sub_110() {
    if ((((g_3839._f1 == 1) || (g_3839._f1 == 3)) || (g_3839._f1 == 0)) || (g_3801 == 1)) {
        g_382C = 1;
        return 1;
    } else { 
        return 0;
    }
}

void sub_153() {
    sub_400();
    if (sub_1ec(0)) {
        sub_16f();
    }
    SCRIPT::TERMINATE_THIS_THREAD();
}

void sub_16f() {
    if (g_BFC[0/*2811*/][0/*281*/]._f103 == 2) {
        g_BFC[0/*2811*/][0/*281*/]._f103 = 0;
    }
    if (g_BFC[1/*2811*/][0/*281*/]._f103 == 2) {
        g_BFC[1/*2811*/][0/*281*/]._f103 = 0;
    }
    if (g_BFC[2/*2811*/][0/*281*/]._f103 == 2) {
        g_BFC[2/*2811*/][0/*281*/]._f103 = 0;
    }
    GAMEPLAY::CLEAR_BIT(&g_8D7, 25);
    GAMEPLAY::SET_BIT(&g_8D8, 11);
}

auto sub_1ec(auto a_0) {
    if (g_8861 == 15) {
        return 0;
    }
    if (sub_20e(a_0)) {
        return 0;
    }
    return 1;
}

auto sub_20e(auto a_0) {
    return sub_21f(a_0, g_8861);
}

auto sub_21f(auto a_0, auto a_1) {
    if (a_1 == 15) {
        return 1;
    }
    if (a_0 == 15) {
        return 0;
    }
    switch (a_0) {
    case 16:
        switch (a_1) {
        case 7:
        case 9:
        case 10:
        case 13:
        case 14:
            return 0;
            break;
        }
        return 1;
        break;
    case 0:
        switch (a_1) {
        case 5:
        case 17:
            return 1;
            break;
        }
        break;
    case 2:
    case 3:
        switch (a_1) {
        case 5:
        case 6:
        case 8:
        case 17:
            return 1;
            break;
        }
        break;
    case 4:
        if (a_1 == 17) {
            return 1;
        }
        break;
    case 5:
        break;
    case 6:
    case 8:
        if (a_1 == 5) {
            return 1;
        }
        break;
    case 7:
        if (a_1 == 6) {
            return 1;
        }
        break;
    case 9:
        if (a_1 == 5) {
            return 1;
        }
        break;
    case 10:
        switch (a_1) {
        case 5:
        case 6:
        case 17:
            return 1;
            break;
        }
        break;
    case 11:
        if (a_1 == 5) {
            return 1;
        }
        break;
    case 17:
        switch (a_1) {
        case 5:
        case 12:
        case 17:
            return 1;
            break;
        }
        break;
    case 12:
    case 18:
        switch (a_1) {
        case 5:
        case 6:
        case 8:
            return 1;
            break;
        }
        break;
    case 13:
        switch (a_1) {
        case 5:
            return 1;
            break;
        }
        break;
    case 14:
        switch (a_1) {
        case 5:
            return 1;
            break;
        }
        break;
    }
    return 0;
}

void sub_400() {
    sub_d1b();
    g_BFC[g_3839/*2811*/][0/*281*/]._f7C[2/*1*/] = 1;
}

auto sub_41f() {
    if ((g_B35 == 1) || (g_3839._f1 < 7)) {
        g_382C = 1;
        return 1;
    } else { 
        return 0;
    }
}

void sub_448(auto a_0, auto a_1, auto a_2, auto a_3, auto a_4, auto a_5, auto a_6) {
    GRAPHICS::_PUSH_SCALEFORM_MOVIE_FUNCTION(a_0, a_1);
    GRAPHICS::_PUSH_SCALEFORM_MOVIE_FUNCTION_PARAMETER_INT(SYSTEM::ROUND(a_2));
    if (a_3 != -1.0) {
        GRAPHICS::_PUSH_SCALEFORM_MOVIE_FUNCTION_PARAMETER_INT(SYSTEM::ROUND(a_3));
    }
    if (a_4 != -1.0) {
        GRAPHICS::_PUSH_SCALEFORM_MOVIE_FUNCTION_PARAMETER_INT(SYSTEM::ROUND(a_4));
    }
    if (a_5 != -1.0) {
        GRAPHICS::_PUSH_SCALEFORM_MOVIE_FUNCTION_PARAMETER_INT(SYSTEM::ROUND(a_5));
    }
    if (a_6 != -1.0) {
        GRAPHICS::_PUSH_SCALEFORM_MOVIE_FUNCTION_PARAMETER_INT(SYSTEM::ROUND(a_6));
    }
    GRAPHICS::_POP_SCALEFORM_MOVIE_FUNCTION_VOID();
}

void sub_4ab() {
    if (!ENTITY::IS_ENTITY_DEAD(PLAYER::PLAYER_PED_ID())) {
        AUDIO::PLAY_SOUND_FRONTEND(-1, "Menu_Back", &g_382E, 1);
    }
}

auto sub_4cb(auto a_0, auto a_1, auto a_2) {
    if (CONTROLS::IS_CONTROL_JUST_PRESSED(a_0, a_1) || ((a_2 == 1) && CONTROLS::IS_DISABLED_CONTROL_JUST_PRESSED(a_0, a_1))) {
        if (GAMEPLAY::IS_PC_VERSION()) {
            if ((GAMEPLAY::UPDATE_ONSCREEN_KEYBOARD() == 0) || (NETWORK::_5FCF4D7069B09026() && CONTROLS::_A571D46727E2B718(2))) {
                return 0;
            }
        }
        if (UI::IS_PAUSE_MENU_ACTIVE() || UI::IS_MEDICAL_DISABLED()) {
            return 0;
        } else { 
            return 1;
        }
    } else { 
        return 0;
    }
}

void sub_53d() {
    if (g_3823 == 0) {
        if (sub_4cb(2, g_381A, 0)) {
            sub_6a1();
            g_3823 = 1;
            sub_d1b();
            GRAPHICS::_PUSH_SCALEFORM_MOVIE_FUNCTION(g_3826, "GET_CURRENT_SELECTION");
            l_23 = GRAPHICS::_POP_SCALEFORM_MOVIE_FUNCTION();
            while (!GRAPHICS::_768FF8961BA904D6(l_23)) {
                SYSTEM::WAIT(0);
            }
            g_BFC[g_3839/*2811*/][l_25/*281*/]._f103 = l_11[GRAPHICS::_2DE7EFA66B906036(l_23)/*1*/];
            sub_634(g_3826, "SET_HEADER", &g_BFC[g_3839/*2811*/][l_25/*281*/]._f7[g_BFC[g_3839/*2811*/][l_25/*281*/]._f103/*4*/], 0, 0, 0, 0);
            if (g_BFC[g_3839/*2811*/][0/*281*/]._f103 == 2) {
                sub_448(g_3826, "SET_SLEEP_MODE", 1.0, 0xbf800000, 0xbf800000, 0xbf800000, 0xbf800000);
            } else { 
                sub_448(g_3826, "SET_SLEEP_MODE", 0.0, 0xbf800000, 0xbf800000, 0xbf800000, 0xbf800000);
            }
            if (sub_1ec(0)) {
                sub_16f();
            }
        }
    }
}

void sub_634(auto a_0, auto a_1, auto a_2, auto a_3, auto a_4, auto a_5, auto a_6) {
    GRAPHICS::_PUSH_SCALEFORM_MOVIE_FUNCTION(a_0, a_1);
    sub_68f(a_2);
    if (!GAMEPLAY::IS_STRING_NULL_OR_EMPTY(a_3)) {
        sub_68f(a_3);
    }
    if (!GAMEPLAY::IS_STRING_NULL_OR_EMPTY(a_4)) {
        sub_68f(a_4);
    }
    if (!GAMEPLAY::IS_STRING_NULL_OR_EMPTY(a_5)) {
        sub_68f(a_5);
    }
    if (!GAMEPLAY::IS_STRING_NULL_OR_EMPTY(a_6)) {
        sub_68f(a_6);
    }
    GRAPHICS::_POP_SCALEFORM_MOVIE_FUNCTION_VOID();
}

void sub_68f(auto a_0) {
    GRAPHICS::_BEGIN_TEXT_COMPONENT(a_0);
    GRAPHICS::_END_TEXT_COMPONENT();
}

void sub_6a1() {
    if (!ENTITY::IS_ENTITY_DEAD(PLAYER::PLAYER_PED_ID())) {
        AUDIO::PLAY_SOUND_FRONTEND(-1, "Menu_Accept", &g_382E, 1);
        sub_6c5();
    }
}

void sub_6c5() {
    if (sub_6d9()) {
        MOBILE::_95C9E72F3D7DEC9B(5);
    }
}

auto sub_6d9() {
    if (g_10A95) {
        return 0;
    } else { 
        v_4 = 0;
        v_2 = CAM::_19CAFA3C87F7C2FF();
        v_3 = CAM::_EE778F8C7E1142E2(v_2);
        if (v_3 == 4) {
            v_4 = 1;
        }
        if (g_26D4D2 || v_4) {
            return 1;
        } else { 
            return 1;
        }
    }
}

void sub_720() {
    g_3823 = 1;
    l_25 = 0;
    l_26 = 0;
    sub_736();
}

void sub_736() {
    sub_448(g_3826, "DISPLAY_VIEW", 1.0, 0xbf800000, 0xbf800000, 0xbf800000, 0xbf800000);
    sub_d1b();
    l_21 = 0;
    asm .vardef<F> 2, "[{\"offset\":0,\"value\":15}]"
    for (v_12 = 0; v_12 < 9; v_12 += 1) {
        v_13 = 0;
        v_14 = 9;
        g_BFC[g_3839/*2811*/][l_25/*281*/]._f54[v_14/*1*/] = 5000;
        for (; v_13 < 9; v_13 += 1) {
            if (g_BFC[g_3839/*2811*/][l_25/*281*/]._f7C[v_13/*1*/] == 1) {
                if (v_2[v_13/*1*/] == 0) {
                    if (g_BFC[g_3839/*2811*/][l_25/*281*/]._f54[v_13/*1*/] < g_BFC[g_3839/*2811*/][l_25/*281*/]._f54[v_14/*1*/]) {
                        v_14 = v_13;
                        sub_93d(g_3826, "SET_DATA_SLOT", SYSTEM::TO_FLOAT(13), SYSTEM::TO_FLOAT(v_12), SYSTEM::TO_FLOAT(g_BFC[g_3839/*2811*/][l_25/*281*/]._f68[v_14/*1*/]), -1.0, -1.0, &g_BFC[g_3839/*2811*/][l_25/*281*/]._f7[v_14/*4*/], 0, 0, 0, 0);
                    }
                }
            }
        }
        l_11[v_12/*1*/] = v_14;
        v_2[v_14/*1*/] = 1;
        if (g_BFC[g_3839/*2811*/][l_25/*281*/]._f7C[v_12/*1*/] == 1) {
            l_21 += 1;
        }
    }
    sub_448(g_3826, "DISPLAY_VIEW", 13.0, 0xbf800000, 0xbf800000, 0xbf800000, 0xbf800000);
    sub_634(g_3826, "SET_HEADER", &g_BFC[g_3839/*2811*/][l_25/*281*/]._f7[g_BFC[g_3839/*2811*/][l_25/*281*/]._f103/*4*/], 0, 0, 0, 0);
    if (g_382D) {
        sub_93d(g_3826, "SET_SOFT_KEYS", 2.0, 1.0, 2.0, -1.0, -1.0, "CELL_205", 0, 0, 0, 0);
        sub_93d(g_3826, "SET_SOFT_KEYS", 3.0, 1.0, 4.0, -1.0, -1.0, "CELL_206", 0, 0, 0, 0);
    } else { 
        sub_93d(g_3826, "SET_SOFT_KEYS", 2.0, 1.0, 2.0, -1.0, -1.0, 0, 0, 0, 0, 0);
        sub_93d(g_3826, "SET_SOFT_KEYS", 3.0, 1.0, 4.0, -1.0, -1.0, 0, 0, 0, 0, 0);
    }
    sub_93d(g_3826, "SET_SOFT_KEYS", 1.0, 0.0, 1.0, -1.0, -1.0, 0, 0, 0, 0, 0);
    GAMEPLAY::CLEAR_BIT(&g_8D7, 17);
}

void sub_93d(auto a_0, auto a_1, auto a_2, auto a_3, auto a_4, auto a_5, auto a_6, auto a_7, auto a_8, auto a_9, auto a_10, auto a_11) {
    GRAPHICS::_PUSH_SCALEFORM_MOVIE_FUNCTION(a_0, a_1);
    GRAPHICS::_PUSH_SCALEFORM_MOVIE_FUNCTION_PARAMETER_INT(SYSTEM::ROUND(a_2));
    if (a_3 != -1.0) {
        GRAPHICS::_PUSH_SCALEFORM_MOVIE_FUNCTION_PARAMETER_INT(SYSTEM::ROUND(a_3));
    }
    if (a_4 != -1.0) {
        GRAPHICS::_PUSH_SCALEFORM_MOVIE_FUNCTION_PARAMETER_INT(SYSTEM::ROUND(a_4));
    }
    if (a_5 != -1.0) {
        GRAPHICS::_PUSH_SCALEFORM_MOVIE_FUNCTION_PARAMETER_INT(SYSTEM::ROUND(a_5));
    }
    if (a_6 != -1.0) {
        GRAPHICS::_PUSH_SCALEFORM_MOVIE_FUNCTION_PARAMETER_INT(SYSTEM::ROUND(a_6));
    }
    if (!GAMEPLAY::IS_STRING_NULL_OR_EMPTY(a_7)) {
        sub_68f(a_7);
    }
    if (!GAMEPLAY::IS_STRING_NULL_OR_EMPTY(a_8)) {
        sub_68f(a_8);
    }
    if (!GAMEPLAY::IS_STRING_NULL_OR_EMPTY(a_9)) {
        sub_68f(a_9);
    }
    if (!GAMEPLAY::IS_STRING_NULL_OR_EMPTY(a_A)) {
        sub_68f(a_A);
    }
    if (!GAMEPLAY::IS_STRING_NULL_OR_EMPTY(a_B)) {
        sub_68f(a_B);
    }
    GRAPHICS::_POP_SCALEFORM_MOVIE_FUNCTION_VOID();
}

void sub_9f0() {
    if (l_2B) {
        if (SYSTEM::TIMERA() > 50) {
            l_2B = 0;
        }
    }
    if (CONTROLS::_A571D46727E2B718(2)) {
        if (sub_4cb(2, 181, 0)) {
            if (l_22 > 0) {
                l_22 -= 1;
            }
            sub_afb();
        }
        if (sub_4cb(2, 180, 0)) {
            l_22 += 1;
            if (l_22 == l_21) {
                l_22 = 0;
            }
            sub_a9d();
        }
    }
    if (l_2B == 0) {
        if (sub_4cb(2, g_3821, 0)) {
            if (l_22 > 0) {
                l_22 -= 1;
            }
            sub_afb();
            l_2B = 1;
            SYSTEM::SETTIMERA(0);
        }
        if (sub_4cb(2, g_3822, 0)) {
            l_22 += 1;
            if (l_22 == l_21) {
                l_22 = 0;
            }
            sub_a9d();
            l_2B = 1;
            SYSTEM::SETTIMERA(0);
        }
    }
}

void sub_a9d() {
    sub_448(g_3826, "SET_INPUT_EVENT", SYSTEM::TO_FLOAT(3), 0xbf800000, 0xbf800000, 0xbf800000, 0xbf800000);
    AUDIO::PLAY_SOUND_FRONTEND(-1, "Menu_Navigate", &g_382E, 1);
    sub_ad8();
}

void sub_ad8() {
    if (sub_6d9()) {
        if (g_38DC == 0) {
            MOBILE::_95C9E72F3D7DEC9B(2);
        } else { 
            MOBILE::_95C9E72F3D7DEC9B(1);
        }
    }
}

void sub_afb() {
    sub_448(g_3826, "SET_INPUT_EVENT", SYSTEM::TO_FLOAT(1), 0xbf800000, 0xbf800000, 0xbf800000, 0xbf800000);
    AUDIO::PLAY_SOUND_FRONTEND(-1, "Menu_Navigate", &g_382E, 1);
    sub_b36();
}

void sub_b36() {
    if (sub_6d9()) {
        if (g_38DC == 0) {
            MOBILE::_95C9E72F3D7DEC9B(1);
        } else { 
            MOBILE::_95C9E72F3D7DEC9B(2);
        }
    }
}

void sub_b59() {
    l_21 = 0;
    asm .vardef<F> 2, "[{\"offset\":0,\"value\":15}]"
    v_12 = 0;
    sub_d1b();
    for (; v_12 < 9; v_12 += 1) {
        v_13 = 0;
        v_14 = 9;
        g_BFC[g_3839/*2811*/][v_14/*281*/] = 5000;
        for (; v_13 < 9; v_13 += 1) {
            if (g_BFC[g_3839/*2811*/][v_13/*281*/]._f118 == 1) {
                if (v_2[v_13/*1*/] == 0) {
                    if (v_13 == 0) {
                        if (g_BFC[g_3839/*2811*/][v_13/*281*/] < g_BFC[g_3839/*2811*/][v_14/*281*/]) {
                            v_14 = v_13;
                            sub_93d(g_3826, "SET_DATA_SLOT", SYSTEM::TO_FLOAT(2), SYSTEM::TO_FLOAT(v_12), -1.0, -1.0, -1.0, &g_BFC[g_3839/*2811*/][v_14/*281*/]._f2, 0, 0, 0, 0);
                        }
                    }
                }
            }
        }
        l_11[v_12/*1*/] = v_14;
        v_2[v_14/*1*/] = 1;
        if (g_BFC[g_3839/*2811*/][v_12/*281*/]._f118 == 1) {
            l_21 += 1;
        }
    }
    sub_448(g_3826, "DISPLAY_VIEW", 13.0, 0xbf800000, 0xbf800000, 0xbf800000, 0xbf800000);
    sub_634(g_3826, "SET_HEADER", "CELL_16", 0, 0, 0, 0);
    if (g_382D) {
        sub_93d(g_3826, "SET_SOFT_KEYS", 2.0, 1.0, 2.0, -1.0, -1.0, "CELL_205", 0, 0, 0, 0);
        sub_93d(g_3826, "SET_SOFT_KEYS", 3.0, 1.0, 4.0, -1.0, -1.0, "CELL_206", 0, 0, 0, 0);
    } else { 
        sub_93d(g_3826, "SET_SOFT_KEYS", 2.0, 1.0, 2.0, -1.0, -1.0, 0, 0, 0, 0, 0);
        sub_93d(g_3826, "SET_SOFT_KEYS", 3.0, 1.0, 4.0, -1.0, -1.0, 0, 0, 0, 0, 0);
    }
    sub_93d(g_3826, "SET_SOFT_KEYS", 1.0, 0.0, 1.0, -1.0, -1.0, 0, 0, 0, 0, 0);
    GAMEPLAY::CLEAR_BIT(&g_8D7, 17);
}

void sub_cf4() {
    if (g_8861 != 15) {
        sub_d1b();
        g_BFC[g_3839/*2811*/][0/*281*/]._f7C[2/*1*/] = 0;
    }
}

void sub_d1b() {
    if (sub_f45(14)) {
        if (!ENTITY::IS_ENTITY_DEAD(PLAYER::PLAYER_PED_ID())) {
            if (ENTITY::GET_ENTITY_MODEL(PLAYER::PLAYER_PED_ID()) == g_17C49._f744E[0/*29*/]) {
                g_3839 = 0;
            } else if (ENTITY::GET_ENTITY_MODEL(PLAYER::PLAYER_PED_ID()) == g_17C49._f744E[1/*29*/]) {
                g_3839 = 1;
            } else if (ENTITY::GET_ENTITY_MODEL(PLAYER::PLAYER_PED_ID()) == g_17C49._f744E[2/*29*/]) {
                g_3839 = 2;
            } else { 
                g_3839 = 0;
            }
        }
    } else { 
        g_3839 = sub_dbc();
        if (g_3839 == 145) {
            g_3839 = 3;
        }
        if (g_10A95) {
            g_3839 = 3;
        }
        if (g_3839 > 3) {
            g_3839 = 3;
        }
    }
}

auto sub_dbc() {
    sub_dd5();
    return g_17C49._f6C1._f21B._fC8D;
}

void sub_dd5() {
    if (ENTITY::DOES_ENTITY_EXIST(PLAYER::PLAYER_PED_ID())) {
        if (sub_f1b(g_17C49._f6C1._f21B._fC8D) != ENTITY::GET_ENTITY_MODEL(PLAYER::PLAYER_PED_ID())) {
            v_2 = sub_ede(PLAYER::PLAYER_PED_ID());
            if (sub_ed2(v_2) && ((!sub_f45(14)) || g_17832)) {
                if ((g_17C49._f6C1._f21B._fC8D != v_2) && sub_ed2(g_17C49._f6C1._f21B._fC8D)) {
                    g_17C49._f6C1._f21B._fC8E = g_17C49._f6C1._f21B._fC8D;
                }
                g_17C49._f6C1._f21B._fC8F = v_2;
                g_17C49._f6C1._f21B._fC8D = v_2;
                return ;
            }
        } else { 
            if (g_17C49._f6C1._f21B._fC8D != 145) {
                g_17C49._f6C1._f21B._fC8F = g_17C49._f6C1._f21B._fC8D;
            }
            return ;
        }
    }
    g_17C49._f6C1._f21B._fC8D = 145;
}

auto sub_ed2(auto a_0) {
    return a_0 < 3;
}

auto sub_ede(auto a_0) {
    if (ENTITY::DOES_ENTITY_EXIST(a_0)) {
        v_4 = ENTITY::GET_ENTITY_MODEL(a_0);
        for (v_3 = 0; v_3 <= 2; v_3 += 1) {
            if (sub_f1b(v_3) == v_4) {
                return v_3;
            }
        }
    }
    return 145;
}

auto sub_f1b(auto a_0) {
    if (sub_ed2(a_0)) {
        return g_17C49._f744E[a_0/*29*/];
    } else if (a_0 != 145) {}
    return 0;
}

auto sub_f45(auto a_0) {
    return g_8861 == a_0;
}